<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        <title>Student Discussion Hub</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
        <style>
            body {
                font-family: 'Roboto', sans-serif;
                background: linear-gradient(135deg, #618fd9, #a0bbc8); /* Soft light blue gradient */
                background-size: cover;
                background-attachment: fixed; /* Keeps the background fixed while scrolling */
                display: flex;
                height: 100vh;
                margin: 0;
            }
    
            /* Sidebar */
            .sidebar {
                width: 250px;
                background-color: #000000;
                color: white;
                padding: 1.5rem;
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                overflow-y: auto;
            }
    
            .sidebar a {
                color: white;
                text-decoration: none;
                display: block;
                margin: 1rem 0;
                font-size: 1.1rem;
            }
    
            .sidebar a:hover {
                color: #fffae6; /* Light yellow on hover */
            }
    
            .main-content {
                margin-left: 250px;
                padding: 2rem;
                width: calc(100% - 250px); /* Adjust width to make space for sidebar */
            }
    
            .btn-custom {
                background-color: rgb(0, 0, 0);
            }
    
            .create-post-form {
                max-width: 600px;
                margin: 0 auto;
                padding: 2rem;
                background-color: white; /* White background for form for contrast */
                border-radius: 8px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
    
            .post-card {
                border: 2px solid #e5e7eb; /* Light gray border */
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Soft shadow */
                margin-bottom: 2rem;
                background-color: #fff;
                transition: transform 0.2s ease-in-out, background-color 0.3s ease;
                border-radius: 8px; /* Rounded corners for posts */
                cursor: pointer; /* Indicates clickable */
                padding: 1.5rem;
                max-width: 800px;
                margin: 1rem auto;
            }
    
            .post-card:hover {
                transform: scale(1.02);
            }
    
            .post-card.selected {
                transform: scale(1.1); /* Zoom in effect */
                background-color: rgba(255, 255, 255, 0.8); /* Highlight with a slight white background */
                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* More prominent shadow */
            }
    
            .latest-posts-section {
                margin-top: 3rem;
            }
    
            .post-category {
                font-size: 1.25rem;
                font-weight: bold;
                color: #4B5563; /* Dark Gray */
            }
    
            .post-subject {
                font-size: 1.75rem;
                color: #333; /* Darker Gray */
                margin-top: 0.5rem;
            }
    
            .post-message {
                font-size: 1.125rem;
                margin-top: 1rem;
                color: #555; /* Medium Gray */
            }
    
            .post-info {
                font-size: 0.875rem;
                color: #888;
                margin-top: 1rem;
            }
    
            .post-info .timestamp {
                color: #aaa;
            }
    
            .interaction-buttons {
                margin-top: 1rem;
                display: flex;
                justify-content: flex-start;
                gap: 1rem;
            }
    
            .interaction-buttons button {
                background-color: #e2e8f0;
                padding: 0.5rem 1rem;
                border-radius: 5px;
                font-size: 0.875rem;
                cursor: pointer;
                transition: background-color 0.2s ease;
            }
    
            .interaction-buttons button:hover {
                background-color: #cbd5e0;
            }
    
            nav {
                background-color: #333;
                padding: 1rem;
            }
    
            nav h1 {
                font-size: 1.8rem;
                color: white;
            }
    
            .file-links {
                margin-top: 1rem;
            }
    
            .file-links a {
                color: #4B5563;
                font-size: 1rem;
                text-decoration: underline;
            }
        </style>
    </head>
    <body class="bg-gray-100">
    
    
        <!-- Sidebar -->
        <div class="sidebar">
            <h2 class="text-2xl font-bold text-center mb-6">Trending</h2>
            <a class="block mb-2 text-custom hover:underline" href="tech.html">#Tech </a>
            <a class="block mb-2 text-custom hover:underline" href="Science.html">#Science</a>
            <a class="block mb-2 text-custom hover:underline" href="Arts.html">#Arts </a>
            <a class="block mb-2 text-custom hover:underline" href="Sports.html">#Sports </a>
           
      
        </div>
    
        <!-- Main Content -->
        <div class="main-content">
            <!-- Navigation Bar -->
            <nav class="bg-black p-4 text-white flex justify-between items-center">
        <h1 class="text-3xl font-bold"> Student Discussion Hub </h1>
          
        <div class="space-x-4">
            <a class="hover:underline" href="Login.html">Logout</a>
         <a class="hover:underline" href="landingpage.html">Home </a>
         <a class="hover:underline" href="profile1.html">Profile</a>
        </div>
       </nav>
    
            <!-- Content Section -->
            <div class="container mx-auto mt-4">
                <!-- Newsfeed Section -->
                <div id="newsfeedSection">
                    <!-- Create Post Form -->
                    <div class="bg-white rounded shadow-md create-post-form">
                        <h2 class="text-2xl font-bold mb-4">Create a New Post</h2>
                        <select class="w-full p-2 border border-gray-300 rounded mb-4" id="postCategory" required="">
                            <option disabled="" selected="" value="">Select Category</option>
                            <option value="Tech">Tech</option>
                            <option value="Science">Science</option>
                            <option value="Arts">Arts</option>
                            <option value="Sports">Sports</option>
                            <option value="Education">Education</option>
                            <option value="Health">Health</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Business">Business</option>
                            <option value="Lifestyle">Lifestyle</option>
                            <option value="Environment">Environment</option>
                        </select>
                        <input type="text" class="w-full p-2 border border-gray-300 rounded mb-4" id="postSubject" placeholder="Enter Subject" required="" />
                        <textarea class="w-full p-2 border border-gray-300 rounded mb-4" id="postMessage" placeholder="Write your post..." required="" rows="5"></textarea>
                        
                        <!-- File Upload Section -->
                        <input type="file" id="fileInput" class="w-full p-2 border border-gray-300 rounded mb-4" multiple />
                        <p class="text-sm text-gray-500">You can upload files like PDF, Word, etc. (multiple files allowed)</p>
    
                        <button class="w-full btn-custom text-white p-2 rounded" onclick="createPost()">Post</button>
                    </div>
    
                
                    <!-- Latest Posts Section -->
                    <div class="latest-posts-section">
                        <h2 class="text-3xl font-semibold text-center  mb-6">Latest Posts</h2>
                        <div id="postContainer"></div>
                    </div>
                    </div>
                    </div>
                    </div>
    
    <script>
        const likedPosts = new Set();

        // Load posts from localStorage
        window.onload = () => {
            const storedPosts = JSON.parse(localStorage.getItem('posts')) || [];
            
            // Reverse the order to show the latest post first
            storedPosts.reverse().forEach(post => renderPost(post));
        };

        function createPost() {
            const postCategory = document.getElementById('postCategory').value;
            const postSubject = document.getElementById('postSubject').value;
            const postMessage = document.getElementById('postMessage').value;
            const fileInput = document.getElementById('fileInput');
            const files = fileInput.files;

            if (!postCategory || !postSubject || !postMessage) {
                alert('Please fill in all fields: category, subject, and message.');
                return;
            }

            const postId = `post-${Date.now()}`; // Unique ID for each post
            const fileLinks = Array.from(files).map(file => {
                const fileURL = URL.createObjectURL(file);
                return { name: file.name, url: fileURL };
            });

            const newPost = {
                id: postId,
                category: postCategory,
                subject: postSubject,
                message: postMessage,
                timestamp: new Date().toLocaleString(),
                likes: 0,
                comments: [],
                shares: 0,
                files: fileLinks // Files associated with the post
            };

            // Save post to localStorage
            const storedPosts = JSON.parse(localStorage.getItem('posts')) || [];
            storedPosts.push(newPost);
            localStorage.setItem('posts', JSON.stringify(storedPosts));

            renderPost(newPost);
        }

        function renderPost(post) {
            const postContainer = document.getElementById('postContainer');
            const newPostElement = document.createElement('div');
            newPostElement.classList.add('post-card');
            newPostElement.id = post.id;
            newPostElement.innerHTML = `
                <div class="post-category">${post.category}</div>
                <div class="post-subject">${post.subject}</div>
                <div class="post-message">${post.message}</div>
                <div class="post-info">
                    <span class="timestamp">${post.timestamp}</span>
                </div>
                <div class="file-links">
                    ${post.files.map(file => `<a href="${file.url}" target="_blank" class="text-blue-600">${file.name}</a>`).join('<br>')}
                </div>
                <div class="interaction-buttons">
                    <button onclick="likePost('${post.id}')">Like (${post.likes})</button>
                    <button onclick="sharePost('${post.id}')">Share (${post.shares})</button>
                    <button onclick="toggleComments('${post.id}')">Comment</button>
                </div>
                <div class="comment-section" id="comments-${post.id}" style="display: none;">
                    <textarea id="comment-input-${post.id}" class="w-full p-2 border border-gray-300 rounded mb-4" placeholder="Add a comment..." rows="3"></textarea>
                    <button class="w-full btn-custom text-white p-2 rounded" onclick="addComment('${post.id}')">Post Comment</button>
                    <div id="comments-list-${post.id}" class="comments-list mt-4"></div>
                </div>
            `;
            postContainer.appendChild(newPostElement);
        }

        function likePost(postId) {
            const postElement = document.getElementById(postId);
            const postIndex = JSON.parse(localStorage.getItem('posts')).findIndex(post => post.id === postId);

            if (likedPosts.has(postId)) {
                alert('You have already liked this post.');
                return;
            }

            likedPosts.add(postId);
            const posts = JSON.parse(localStorage.getItem('posts'));
            posts[postIndex].likes += 1;
            localStorage.setItem('posts', JSON.stringify(posts));

            postElement.querySelector('button').innerText = `Like (${posts[postIndex].likes})`;
        }

        function sharePost(postId) {
            const postIndex = JSON.parse(localStorage.getItem('posts')).findIndex(post => post.id === postId);
            const posts = JSON.parse(localStorage.getItem('posts'));
            posts[postIndex].shares += 1;
            localStorage.setItem('posts', JSON.stringify(posts));

            const postElement = document.getElementById(postId);
            postElement.querySelectorAll('button')[1].innerText = `Share (${posts[postIndex].shares})`;
        }

        function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            const currentState = commentsSection.style.display;

            if (currentState === 'none') {
                commentsSection.style.display = 'block';
            } else {
                commentsSection.style.display = 'none';
            }
        }

        function addComment(postId) {
            const commentInput = document.getElementById(`comment-input-${postId}`);
            const commentText = commentInput.value.trim();

            if (commentText === '') {
                alert('Please enter a comment.');
                return;
            }

            const postIndex = JSON.parse(localStorage.getItem('posts')).findIndex(post => post.id === postId);
            const posts = JSON.parse(localStorage.getItem('posts'));
            posts[postIndex].comments.push(commentText);
            localStorage.setItem('posts', JSON.stringify(posts));

            renderComments(postId);
            commentInput.value = ''; // Clear input
        }

        function renderComments(postId) {
            const commentsList = document.getElementById(`comments-list-${postId}`);
            const post = JSON.parse(localStorage.getItem('posts')).find(post => post.id === postId);

            commentsList.innerHTML = post.comments.map(comment => `<div class="comment-item">${comment}</div>`).join('');
        }
    </script>
</body>
</html>
